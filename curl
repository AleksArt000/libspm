[info]
name = curl
version = 7.52.1
type = src
license = MIT
url = https://curl.haxx.se/download/curl-$VERSION.tar.lzma

[description]
curl is a command-line tool that is used to transfer data over a network. It is commonly used to download files from the internet, but can also be used to upload files, make HTTP requests, and more. This package is essential for many other programs that rely on network connectivity.

[dependencies]
openssl
gnu-tls

[makedeps]
autoconf
automake
libtool

[install]
wget $URL
wget http://www.linuxfromscratch.org/patches/blfs/8.0/curl-7.52.1-valgrind_filter-1.patch
tar -xzvf dash-$VERSION.tar.gz
cd dash-$VERSION
patch -Np1 -i ../curl-7.52.1-valgrind_filter-1.patch &&
./configure --prefix=/usr                           \
            --disable-static                        \
            --enable-threaded-resolver              \
            --with-ca-path=/etc/ssl/certs &&
make

sudo make install &&
sudo rm -rf docs/examples/.deps &&
sudo find docs \( -name Makefile\* \
          -o -name \*.1       \
          -o -name \*.3 \)    \
          -exec rm {} \;      &&
sudo install -v -d -m755 /usr/share/doc/curl-7.52.1 &&
sudo cp -v -R docs/*     /usr/share/doc/curl-7.52.1

[special]
echo "dash is installed"
echo "done..."

